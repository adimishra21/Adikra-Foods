{
  "version": 2,
  "builds": [
    {
      "src": "frontend/food-ordering-app/package.json",
      "use": "@vercel/static-build",
      "config": {
        "distDir": "build"
      }
    },
    {
      "src": "backend/online-food-ordering/target/*.jar",
      "use": "@vercel/java",
      "config": {
        "runtime": "java17"
      }
    }
  ],
  "routes": [
    {
      "src": "/api/(.*)",
      "dest": "backend/online-food-ordering/target/online-food-ordering-0.0.1-SNAPSHOT.jar"
    },
    {
      "src": "^/static/(.*)",
      "dest": "frontend/food-ordering-app/build/static/$1"
    },
    {
      "src": "^/favicon.ico",
      "dest": "frontend/food-ordering-app/build/favicon.ico"
    },
    {
      "src": "^/manifest.json",
      "dest": "frontend/food-ordering-app/build/manifest.json"
    },
    {
      "src": "^/asset-manifest.json",
      "dest": "frontend/food-ordering-app/build/asset-manifest.json"
    },
    {
      "src": "^/((?!api/).*)",
      "dest": "frontend/food-ordering-app/build/index.html"
    }
  ],
  "env": {
    "SPRING_PROFILES_ACTIVE": "prod",
    "SERVER_PORT": "5454",
    "SPRING_DATASOURCE_URL": "@spring_datasource_url",
    "SPRING_DATASOURCE_USERNAME": "@spring_datasource_username",
    "SPRING_DATASOURCE_PASSWORD": "@spring_datasource_password",
    "SPRING_JPA_HIBERNATE_DDL_AUTO": "update",
    "SPRING_JPA_SHOW_SQL": "false",
    "SPRING_FLYWAY_ENABLED": "true",
    "SPRING_FLYWAY_BASELINE_ON_MIGRATE": "true"
  }
} 